<%- include("partials/header") -%>

<form name="form_name" id="form_name" class="container" action="/share-list-update/<%= bodyUsername %>/<%= bodySessionId %>" method="post">
  <nav class="navbar fixed-top bg-warning p-2 bg-opacity-50 text-center">
    <a class="navbar-brand btn omw-bg-color-yellow omw-font-bold fs-4" href="/share-list/<%= bodyUsername %>/<%= bodySessionId %>"><i class="fas fa-arrow-left"></i></a>
    <button class="btn omw-bg-color-green omw-font-bold-white fs-4 mx-auto" type="submit">업데이트하기</button>
  </nav>

  <div class="container pt-5 pb-5">
    <div class="container pt-3 pb-3">
      <% for (let i = 0; i < friendItems.length; i++) { %>
      <div class="col-8 col-lg-3 col-md-6 col-sm-6 mt-2 p-1 mx-auto omw-bg-color-faintyellow">
        <input class="form-check-input align-middle ms-3 me-3" type="checkbox" name="selectFriend" value="<%= friendItems[i].username %>" id="<%= i %>label">
        <label class="form-check-label" for="<%= i %>label">
          <img src="<%= friendItems[i].profile %>" class="rounded-circle mt-1 mb-1 me-3" alt="friend-profile" width="48" height="48">
          <b class="omw-font-light"><%= friendItems[i].nickname %></b>
        </label>
      </div>
      <% } %>
    </div>
  </div>
</form>

<script type="text/javascript">
  let checks = document.querySelectorAll(".form-check-input");
  let limit = 5;
  for (let i = 0; i < checks.length; i++) {
    checks[i].onclick = selectiveCheck;
  }
  function selectiveCheck(event){
    let checkedChecks = document.querySelectorAll(".form-check-input:checked");
    if(checkedChecks.length >= limit + 1) {
      return false;
    }
  }

</script>
<%- include("partials/footer") -%>
